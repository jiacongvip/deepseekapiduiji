# 宝塔 Docker 重启命令

## 方式一：使用 docker-compose（推荐）

```bash
# 1. 进入项目目录
cd /path/to/your/project

# 2. 进入 DoubaoFreeApi 目录拉取最新代码
cd DoubaoFreeApi
git pull origin main

# 3. 返回项目根目录，重新构建并重启 doubao-free-api 容器
cd ..
docker-compose build doubao-free-api
docker-compose up -d doubao-free-api
```

## 方式二：直接使用 docker 命令

```bash
# 1. 进入 DoubaoFreeApi 目录拉取最新代码
cd /path/to/your/project/DoubaoFreeApi
git pull origin main

# 2. 停止并删除旧容器
docker stop doubao-free-api
docker rm doubao-free-api

# 3. 重新构建镜像
cd /path/to/your/project
docker-compose build doubao-free-api

# 4. 启动新容器
docker-compose up -d doubao-free-api
```

## 方式三：一键重启脚本（最简单）

```bash
# 进入项目根目录
cd /path/to/your/project

# 拉取代码并重启
cd DoubaoFreeApi && git pull origin main && cd .. && docker-compose restart doubao-free-api
```

## 查看日志（用于调试）

```bash
# 查看容器日志
docker logs -f doubao-free-api

# 或者使用 docker-compose
docker-compose logs -f doubao-free-api
```

## 注意事项

1. 如果代码有依赖变化，需要重新构建镜像：
   ```bash
   docker-compose build --no-cache doubao-free-api
   docker-compose up -d doubao-free-api
   ```

2. 如果只是代码更新，可以直接重启（不重新构建）：
   ```bash
   docker-compose restart doubao-free-api
   ```
   但这种方式需要确保代码是通过 volume 挂载的，否则需要重新构建。

3. 根据你的 docker-compose.yml，DoubaoFreeApi 是通过 build 方式构建的，所以代码更新后需要重新构建镜像。

